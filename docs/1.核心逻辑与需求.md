ğŸŒŒ Nebula KTV (æ˜Ÿäº‘ KTV) - äº§å“éœ€æ±‚æ ¸å¿ƒæ–‡æ¡£
| é¡¹ç›®æ¦‚å†µ | è¯´æ˜ |
|---|---|
| ç‰ˆæœ¬ | Phase 1 (Core MVP) |
| æ ¸å¿ƒç†å¿µ | AI Define Audio (AIå®šä¹‰éŸ³é¢‘) |
| ç¡¬ä»¶æ¶æ„ | ç»¿è” NAS (Docker) + ææ°ª 8155 è½¦æœº (Web) |
| å½“å‰ç­–ç•¥ | æè‡´æ”¶æ•› P0ï¼Œä¼˜å…ˆä¿è¯è§†å¬ä¸æ•°æ®æ¶æ„ï¼Œå‰¥ç¦»ä¸‹è½½ä¸å¤šç«¯æ§åˆ¶ã€‚ |
1. ä»·å€¼éªŒè¯ (Validation)
1.1 æ ¸å¿ƒç—›ç‚¹ (The Pain)
 * åœºæ™¯ç—›ç‚¹ï¼š ææ°ªè½¦æœºå°é—­ï¼Œæ— æ³•å®‰è£…ä¸‰æ–¹ APPï¼›ä¼ ç»Ÿè½¦è½½ KTV æ­Œæ›²å°‘ã€éœ€ä»˜è´¹ã€ä½“éªŒå·®ã€‚
 * æŠ€æœ¯ç—›ç‚¹ï¼š æ™®é€š MP4 æ— æ³•åˆ‡æ¢ä¼´å¥ï¼›ç½‘ä¸Šçš„ LRC æ­Œè¯å¸¸å¸¸ä¸å‡†æˆ–ä¸å¯¹é½ï¼›ä¸‹è½½ä¼´å¥æå…¶éº»çƒ¦ã€‚
1.2 è§£å†³æ–¹æ¡ˆ (The Solution)
 * Nebula å¼•æ“ (NAS)ï¼š æ„å»ºä¸€å¥—å…¨è‡ªåŠ¨ AI æµæ°´çº¿ï¼Œå°†ä»»æ„è§†é¢‘æ–‡ä»¶è½¬åŒ–ä¸ºâ€œå¯å”±ã€å¯çœ‹ã€å¯è¯„åˆ†â€çš„æ ‡å‡†åŒ– KTV èµ„æºã€‚
 * Zero-Install (Web)ï¼š åˆ©ç”¨è½¦è½½æµè§ˆå™¨çš„é«˜æ€§èƒ½æ¸²æŸ“èƒ½åŠ›ï¼Œå®ç°æ— ç¼ K æ­Œä½“éªŒã€‚
 * æ•°æ®èµ„äº§åŒ–ï¼š å»ºç«‹è¯¦å°½çš„å…ƒæ•°æ®ä»“åº“ï¼Œä¸ºæœªæ¥æ‰©å±•ï¼ˆå¦‚æ™ºèƒ½æ¨èã€å¤šç»´åˆ†ç±»ï¼‰æ‰“ä¸‹åœ°åŸºã€‚
1.3 æŠ¤åŸæ²³ (Moat)
 * ç§æœ‰åŒ–ï¼š åªè¦ NAS åœ¨ï¼ŒæœåŠ¡å°±åœ¨ï¼Œä¸å—ç‰ˆæƒä¸‹æ¶å½±å“ã€‚
 * éŸ³è´¨ä¼˜åŠ¿ï¼š é‡‡ç”¨ Source Crossfade (æºéŸ³é¢‘åˆ‡æ¢) æŠ€æœ¯ï¼Œä¿ç•™åŸæ±åŸå‘³çš„å½•éŸ³å®¤çº§å¬æ„Ÿï¼Œä¼˜äºæ‰€æœ‰çº¯ AI æ¶ˆé™¤æ–¹æ¡ˆã€‚
2. åŠŸèƒ½æ¢³ç† (Feature List)
ğŸ”¥ P0: æ ¸å¿ƒåŸºçŸ³ (The Foundation)
ç›®æ ‡ï¼šè·‘é€šâ€œæ–‡ä»¶ä¸¢è¿›å» -> AIå¤„ç† -> è½¦æœºæ’­æ”¾â€é—­ç¯ã€‚
2.1 ğŸ—„ï¸ å…¨ç»´åº¦å…ƒæ•°æ®ç³»ç»Ÿ (Ultimate Metadata Schema)
 * æè¿°ï¼š ä¸ºäº†åº”å¯¹æœªæ¥åå¹´çš„æ‰©å±•ï¼Œæ•°æ®åº“è®¾è®¡å¿…é¡»è¾¾åˆ°å•†ä¸šè½¯ä»¶çº§åˆ«ã€‚
 * åŒ…å«å­—æ®µï¼š
   * åŸºç¡€ä¿¡æ¯ï¼š Title (æ­Œå), Artist (æ­Œæ‰‹), Album (ä¸“è¾‘), CoverArt (å°é¢).
   * åˆ†ç±»ç´¢å¼•ï¼š Region (æ¸¯å°/æ¬§ç¾/å†…åœ°), Gender (ç”·/å¥³/ç»„åˆ), Genre (æµè¡Œ/æ‘‡æ»š/R&B), Language (æ™®é€šè¯/ç²¤è¯­/è‹±è¯­).
   * æŠ€æœ¯å‚æ•°ï¼š Duration (æ—¶é•¿), BPM (é€Ÿåº¦), Key (åŸè°ƒï¼Œå¦‚ C Major), SourceType (Original/AI), HasMV (å¸ƒå°”å€¼).
   * ç”¨æˆ·æ•°æ®ï¼š PlayCount (æ’­æ”¾æ¬¡æ•°), LastPlayed (æœ€åæ’­æ”¾), IsFavorite (æ”¶è—).
   * æ‰©å±•é¢„ç•™ï¼š Tags (æ ‡ç­¾ç³»ç»Ÿï¼Œå¦‚"æŠ–éŸ³çƒ­æ­Œ", "é€‚åˆåˆå”±").
2.2 ğŸ­ Nebula AI å·¥å‚ (The Processing Pipeline)
 * æè¿°ï¼š åå°é™é»˜è¿è¡Œçš„ Docker å®¹å™¨ç»„ã€‚
 * é€»è¾‘ï¼š
   * Watchdogï¼š ç›‘å¬ NAS ç›®å½•ã€‚
   * UVR5 åˆ†ç¦»ï¼š æ— è®ºæºæ–‡ä»¶å¦‚ä½•ï¼Œå¼ºåˆ¶åˆ†ç¦»å‡ºçº¯å‡€äººå£°ï¼ˆç”¨äº AI è¯†åˆ«ï¼‰å’Œçº¯ä¼´å¥ï¼ˆç”¨äºå¤‡ç”¨ï¼‰ã€‚
   * Whisper å¬å†™ï¼š åˆ©ç”¨çº¯å‡€äººå£°ç”Ÿæˆæ­Œè¯ã€‚
   * Metadata Parserï¼š è‡ªåŠ¨ä»æ–‡ä»¶åï¼ˆå¦‚ [å‘¨æ°ä¼¦][2004]ä¸ƒé‡Œé¦™.mp4ï¼‰æˆ–éŸ³é¢‘æŒ‡çº¹ä¸­æå–ä¿¡æ¯å¡«å…¥ P0.1 çš„æ•°æ®åº“ã€‚
2.3 ğŸ¤ æ˜Ÿäº‘æ’­æ”¾å™¨ (Web Player Core)
 * æè¿°ï¼š è½¦æœºç«¯çš„å‘ˆç°æ ¸å¿ƒã€‚
 * å…³é”®ç‰¹æ€§ï¼š
   * æºéŸ³é¢‘æ— ç¼åˆ‡æ¢ï¼š æ’­æ”¾æ—¶åŠ è½½ [åŸç‰ˆéŸ³è½¨] + [AI ä¼´å¥éŸ³è½¨]ã€‚ç‚¹å‡»â€œåŸå”±â€æ—¶ï¼Œæ‰§è¡Œ 500ms äº¤å‰æ¸å˜ (Crossfade)ã€‚
   * æ— äº¤äº’éŸ³é‡ï¼š MVP é˜¶æ®µä¸å«éŸ³é‡æ¡ï¼Œä¾é ç³»ç»Ÿåº•å±‚éŸ³é‡ï¼Œä½†åº•å±‚ä»£ç é¢„ç•™ GainNodeã€‚
   * åŸºç¡€äº¤äº’ï¼š åªæœ‰ [æ’­æ”¾/æš‚åœ]ã€[åˆ‡æ­Œ]ã€[åŸå”±/ä¼´å¥] ä¸‰ä¸ªè¶…å¤§æŒ‰é’®ã€‚
âœ¨ P1: äº¤äº’ä¸ä½“éªŒè¿›åŒ– (Experience Evolution)
ç›®æ ‡ï¼šè®©ç³»ç»Ÿå˜å¾—â€œå¥½ç”¨â€å’Œâ€œå¥½å¬â€ï¼Œå¹¶æ”¯æŒç§»åŠ¨ç«¯ã€‚
2.4 ğŸ“± æ‰‹æœºé¥æ§ä¸­å¿ƒ (Mobile Remote)
 * æè¿°ï¼š è§£å†³æŠ•å½±ä»ª/åæ’ç‚¹æ­Œé—®é¢˜ã€‚
 * åŠŸèƒ½ï¼š
   * æ‰«ç è¿æ¥ WebSocketã€‚
   * æ‰‹æœºç«¯ä½œä¸ºâ€œç‚¹æ­Œå°â€ï¼šæœç´¢ã€æŸ¥çœ‹æ’è¡Œæ¦œã€åŠ å…¥å¾…å”±åˆ—è¡¨ã€‚
   * åŒæ­¥ï¼š æ‰‹æœºåˆ‡æ­Œï¼Œå¤§å±ç§’åˆ‡ã€‚
2.5 ğŸšï¸ æ··å“ç‰¹æ•ˆç³»ç»Ÿ (Reverb System)
 * æè¿°ï¼š è®©ä½ åœ¨è½¦é‡Œå”±å‡ºâ€œå¤§å…æ„Ÿâ€ã€‚
 * å®ç°ï¼š åŸºäº Web Audio API çš„ ConvolverNodeã€‚
 * äº¤äº’ï¼š ç®€å•çš„ç™¾åˆ†æ¯”è¿›åº¦æ¡ï¼ˆ0% å¹²éŸ³ -> 100% å¤§æ•™å ‚æ··å“ï¼‰ã€‚
 * é¢„è®¾ï¼š æä¾› KTVã€å½•éŸ³æ£šã€æ¼”å”±ä¼š ä¸‰ç§é¢„è®¾å‚æ•°ã€‚
2.6 ğŸ“¥ è‡ªåŠ¨ä¸‹è½½ä¸æ•´ç† (Auto-Download)
 * æè¿°ï¼š æ¥å…¥çˆ¬è™«/APIï¼Œå®ç°â€œæƒ³å”±ä»€ä¹ˆæœä»€ä¹ˆâ€ã€‚
 * é€»è¾‘ï¼š èšåˆæœç´¢ -> è‡ªåŠ¨ä¸‹è½½æœ€é«˜ç”»è´¨ -> è‡ªåŠ¨è¡¥å…¨å…ƒæ•°æ® (P0 çš„æ•°æ®åº“) -> æ‰”è¿› AI å·¥å‚ã€‚
2.7 ğŸ“Š æ’è¡Œæ¦œä¸åˆ†ç±»å¯¼èˆª (Charts & Categories)
 * æè¿°ï¼š ç»“åˆæ‰‹æœºç«¯å±•ç¤ºã€‚
 * é€»è¾‘ï¼š æ¯æ—¥æŠ“å–å¤–éƒ¨æ¦œå•ï¼ˆé£™å‡æ¦œã€çƒ­æ­Œæ¦œï¼‰ï¼Œæ˜ å°„åˆ°æœ¬åœ°æ›²åº“ã€‚å¦‚æœæ²¡æœ‰è¿™é¦–æ­Œï¼Œæ˜¾ç¤ºâ€œç‚¹å‡»ä¸‹è½½â€ã€‚
2.8 ğŸ“ æ­Œè¯æ™ºèƒ½æ ¡æ­£ (Lyrics Alignment)
 * æè¿°ï¼š åˆ©ç”¨ Force Alignment ç®—æ³•ï¼Œå°†å‡†ç¡®çš„ LRC æ–‡æœ¬å¯¹åº”åˆ°ç²¾å‡†çš„æ—¶é—´è½´ä¸Šï¼Œå®ç°é€å­—å˜è‰²ã€‚
ğŸ¨ P2: è¶£å‘³ä¸ä¸ªæ€§åŒ– (Fun & Personalization)
ç›®æ ‡ï¼šå¢åŠ ç³»ç»Ÿçš„å¨±ä¹æ€§ï¼Œå±äºâ€œæœ‰ç©ºå†åšâ€ã€‚
2.9 ğŸ‘¾ è¶£å‘³å˜å£°å™¨ (Voice Changer)
 * æè¿°ï¼š ææ€ªéŸ³æ•ˆï¼ˆæ€ªå…½ã€èè‰ã€æœºå™¨äººï¼‰ã€‚
 * åˆ¤å®šï¼š P2ã€‚å› ä¸º Webç«¯å®æ—¶å˜å£°å»¶è¿Ÿè¾ƒé«˜ï¼Œä¸”å®¹æ˜“äº§ç”Ÿå•¸å«ï¼Œè°ƒè¯•éš¾åº¦å¤§ã€‚
2.10 ğŸ† è§†è§‰ç‰¹æ•ˆ (Visualizer)
 * æè¿°ï¼š ç®€å•çš„ CSS3 æ°›å›´åŠ¨æ•ˆï¼ˆå¦‚èƒŒæ™¯éšå°é¢è‰²å¾‹åŠ¨ï¼‰ã€‚
3. ä¸šåŠ¡æµç¨‹å›¾ (User Flow)
3.1 èµ„æºç”Ÿäº§æµç¨‹ (The Factory Flow) - å…¨è‡ªåŠ¨/åå°
graph TD
    A[ç”¨æˆ·æ‰‹åŠ¨æ”¾å…¥/P1è‡ªåŠ¨ä¸‹è½½ MP4] -->|ç›‘å¬| B(NAS åå°æ•è·)
    B --> C{æ˜¯å¦å·²å­˜åœ¨å…ƒæ•°æ®?}
    C -->|å¦| D[FFmpeg: æå–éŸ³é¢‘ & å°é¢]
    D --> E[UVR5: åˆ†ç¦»äººå£°/ä¼´å¥]
    E -->|äººå£°è½¨é“| F[Whisper: ç”Ÿæˆ/æ ¡å¯¹æ­Œè¯]
    E -->|ä¼´å¥è½¨é“| G[å­˜å‚¨ä¸º inst.mp3]
    F --> H[å…ƒæ•°æ®å¼•æ“: å†™å…¥ SQLite]
    G --> H
    H --> I[çŠ¶æ€æ›´æ–°: Ready]

3.2 æ’­æ”¾ä½“éªŒæµç¨‹ (The Playback Flow) - è½¦æœº/Web
graph LR
    Step1[è¿›å…¥é¦–é¡µ] --> Step2{é€‰æ‹©æ­Œæ›²}
    Step2 -->|æµè§ˆ| A[æœ€è¿‘æ·»åŠ  / P1åˆ†ç±» / P1æ’è¡Œæ¦œ]
    Step2 -->|æœç´¢| B[è¾“å…¥ æ­Œæ‰‹/æ­Œå]
    A --> C[ç‚¹å‡»å°é¢]
    B --> C
    C --> D[åŠ è½½æ’­æ”¾å™¨ Overlay]
    D --> E(å¹¶è¡ŒåŠ è½½: Video + OrigAudio + InstAudio)
    E --> F[å¼€å§‹æ’­æ”¾]
    
    subgraph æ ¸å¿ƒäº¤äº’
    F --> G[é»˜è®¤: è§†é¢‘ç”»é¢ + ä¼´å¥éŸ³è½¨]
    G -->|ç‚¹å‡»åŸå”±| H[Crossfade: ä¼´å¥é™ä¸º0 / åŸå”±å‡ä¸º100]
    G -->|P1: è°ƒèŠ‚æ··å“| I[ConvolverNode å¤„ç†éº¦å…‹é£æµ]
    end
